# MathsModel_PragathiKelkar
### ACM40960 - PROJECTS IN MATHS MODELLING 2022/23
### PRAGATHI KELKAR-22202401,           HANIMI GOLAMARI-22202328
# Single Deck Blackjack Simulation

This README includes an overview of the project, instructions for running the simulation, a discussion of the methods used, results validation, and comparisons of single- and multiplayer scenarios.

<h1 align="center">Hi ðŸ‘‹, I'm Pragathi</h1>
<h3 align="center">A graduate Student in UCD doing Masters in Data and Computational Science.</h3>
<img align="right" alt=coding width= img src= "https://i.gifer.com/ALTb.gif">
- ðŸ”­ Iâ€™m currently working on **Single Deck Blackjack Simulationn**
<h3 align="left">Connect with me:</h3>
<p align="left">
<a href="https://www.linkedin.com/in/pragathi-kelkar-220451115" target="blank"><img align="center" src="https://raw.githubusercontent.com/rahuldkjain/github-profile-readme-generator/master/src/images/icons/Social/linked-in-alt.svg" alt="Pragathi Kelkar" height="30" width="40" /></a>
</p>

<h3 align="left">Languages and Tools:</h3>
<p align="left"> <a href="https://azure.microsoft.com/en-in/" target="_blank" rel="noreferrer"> <img src="https://www.vectorlogo.zone/logos/microsoft_azure/microsoft_azure-icon.svg" alt="azure" width="40" height="40"/> </a> <a href="https://www.cprogramming.com/" target="_blank" rel="noreferrer"> <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/c/c-original.svg" alt="c" width="40" height="40"/> </a> <a href="https://www.w3schools.com/cpp/" target="_blank" rel="noreferrer"> <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/cplusplus/cplusplus-original.svg" alt="cplusplus" width="40" height="40"/> </a> <a href="https://www.w3schools.com/cs/" target="_blank" rel="noreferrer"> <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/csharp/csharp-original.svg" alt="csharp" width="40" height="40"/> </a> <a href="https://www.w3schools.com/css/" target="_blank" rel="noreferrer"> <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/css3/css3-original-wordmark.svg" alt="css3" width="40" height="40"/> </a> <a href="https://dotnet.microsoft.com/" target="_blank" rel="noreferrer"> <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/dot-net/dot-net-original-wordmark.svg" alt="dotnet" width="40" height="40"/> </a> <a href="https://git-scm.com/" target="_blank" rel="noreferrer"> <img src="https://www.vectorlogo.zone/logos/git-scm/git-scm-icon.svg" alt="git" width="40" height="40"/> </a> <a href="hexo.io/" target="_blank" rel="noreferrer"> <img src="https://www.vectorlogo.zone/logos/hexoio/hexoio-icon.svg" alt="hexo" width="40" height="40"/> </a> <a href="https://www.w3.org/html/" target="_blank" rel="noreferrer"> <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/html5/html5-original-wordmark.svg" alt="html5" width="40" height="40"/> </a> <a href="https://www.jenkins.io" target="_blank" rel="noreferrer"> <img src="https://www.vectorlogo.zone/logos/jenkins/jenkins-icon.svg" alt="jenkins" width="40" height="40"/> </a> <a href="https://www.microsoft.com/en-us/sql-server" target="_blank" rel="noreferrer"> <img src="https://www.svgrepo.com/show/303229/microsoft-sql-server-logo.svg" alt="mssql" width="40" height="40"/> </a> <a href="https://www.mysql.com/" target="_blank" rel="noreferrer"> <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/mysql/mysql-original-wordmark.svg" alt="mysql" width="40" height="40"/> </a> <a href="https://nodejs.org" target="_blank" rel="noreferrer"> <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/nodejs/nodejs-original-wordmark.svg" alt="nodejs" width="40" height="40"/> </a> <a href="https://pandas.pydata.org/" target="_blank" rel="noreferrer"> <img src="https://raw.githubusercontent.com/devicons/devicon/2ae2a900d2f041da66e950e4d48052658d850630/icons/pandas/pandas-original.svg" alt="pandas" width="40" height="40"/> </a> <a href="https://www.postgresql.org" target="_blank" rel="noreferrer"> <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/postgresql/postgresql-original-wordmark.svg" alt="postgresql" width="40" height="40"/> </a> <a href="https://postman.com" target="_blank" rel="noreferrer"> <img src="https://www.vectorlogo.zone/logos/getpostman/getpostman-icon.svg" alt="postman" width="40" height="40"/> </a> <a href="https://www.python.org" target="_blank" rel="noreferrer"> <img src="https://raw.githubusercontent.com/devicons/devicon/master/icons/python/python-original.svg" alt="python" width="40" height="40"/> </a> <a href="https://pytorch.org/" target="_blank" rel="noreferrer"> <img src="https://www.vectorlogo.zone/logos/pytorch/pytorch-icon.svg" alt="pytorch" width="40" height="40"/> </a> <a href="https://scikit-learn.org/" target="_blank" rel="noreferrer"> <img src="https://upload.wikimedia.org/wikipedia/commons/0/05/Scikit_learn_logo_small.svg" alt="scikit_learn" width="40" height="40"/> </a> <a href="https://seaborn.pydata.org/" target="_blank" rel="noreferrer"> <img src="https://seaborn.pydata.org/_images/logo-mark-lightbg.svg" alt="seaborn" width="40" height="40"/> </a> <a href="https://www.selenium.dev" target="_blank" rel="noreferrer"> <img src="https://raw.githubusercontent.com/detain/svg-logos/780f25886640cef088af994181646db2f6b1a3f8/svg/selenium-logo.svg" alt="selenium" width="40" height="40"/> </a> <a href="https://www.tensorflow.org" target="_blank" rel="noreferrer"> <img src="https://www.vectorlogo.zone/logos/tensorflow/tensorflow-icon.svg" alt="tensorflow" width="40" height="40"/> </a> </p>


## Table of Contents
- [Introduction](#introduction)
- [Features](#features)
- [Requirements](#requirements)
- [Installation](#installation)
- [Usage](#usage)
- [Simulation Details](#simulation-details)
- [Results](#results)
- [Pending Work](#pending_work)
- [Future Scope](#future-scope)
- [Contact](#contact)

## Introduction

Blackjack is a card game in which players fight against a dealer to get as near to 21 as they can without going over.Each card has a specific value.Players are dealt two cards, and they can choose to "hit" and get more cards or "stand" with their current cards. The goal is to have a higher total than the dealer without exceeding 21. If a player's total goes over 21, they lose the round. The player with the closest total to 21 without going over wins.
Monte Carlo simulations use random sampling to generate a large number of scenarios or trials.

Here we attempt to simulate a blackjack game[simulate_game] multiple times with random input to calculate the Win/loss/tie probabilities[calculate_probability] for single/multiple player game using single deck of cards and validate the results using a actual real life dataset.



## Features
- One deck of cards is used to simulate blackjack games in this feature.
- Examine the likelihood of winning using various player strategies.Three strategies are used Here:
  1. agressive >17 continuous hit
  2. Basic <17 hit 
  3. Balanced between 14 to 18, randomly hit and stay

- We illustrate with an example,what the probability of winning/loosing is if a player takes another card.
- Simple-to-use R script for simulation execution.
- Implemented code for single player as well as multiplayer simulated for 10,000 times using monte carlo method with random inputs.
- We validated the results using a real dataset for multiplayers.


## Requirements
To run the simulation, you need:
- R programming language (version R-4.3.1 or later)
- Rstudio (version 3.3.0 or later )
- Basic understanding of Blackjack rules and strategies.
  
## Installation
1.Clone this repository to your local machine and run in R studio.

## Usage

Modify Parameters:

Inside the script, you'll find configurable parameters such as the number of simulation runs, players, and strategies.
Adjust these parameters according to your simulation scenario. For example:
num_simulations <- 100000
num_players <- 2
player_strategy <- "balanced"

#### Why the project is useful?
We can show how much chances are there for a player or the dealer to win the bet in a game.


#### Where users can get help with your project?
We have referred the following :
 1.Akkar, A., Cregan, S., Cassens, J., Vander-Pallen, M.A. and Mohd, T.K., 2022. Playing Blackjack Using Computer Vision. In Artificial Intelligence and Applications
Dong, H., Mao, J., Lin, T., Wang, C., Li, L., and Zhou, D., 2019. Neural logic machines. arXiv preprint arXiv:1904.11694.

2.Green, M.C., Khalifa, A., Charity, M., Bhaumik, D. and Togelius, J., 2022, July. Predicting Personas Using Mechanic Frequencies and Game State Traces. In 2022 IEEE
Congress on Evolutionary Computation (CEC) (pp. 1-8). IEEE.

3.Reinhardt, J., 2020. Competing in a complex hidden role game with information set monte carlo tree search. arXiv preprint arXiv:2005.07156.
VidÃ¡mi, M., SzilÃ¡gyi, L. and Iclanzan, D., 2020. Real-Valued Card Counting Strategies for the Game of Blackjack. In Neural Information Processing: 27th International
Conference.
 
 4.ICONIP 2020, Bangkok, Thailand, November 23â€“27, 2020, Proceedings, Part II 27 (pp. 63-73). Springer International Publishing


## Simulation Details

Case 1: The above process should be implemented for multiplayer(6 players,1 dealer)
-a)Fix strategies to each player(eg:P1-basic,P2-aggressive etc) :
- compare win,loss,tie percentage for all players after 10,000 simulations.
-Also compare this percentages with single player with same strategy.
b)Strategies are assigned randomly to each of players : 
- After monte carlo(10k) simulations,find what is the win,loss and tie percentage.
-Analyse which player used which strategy most and predict what he will most likely use in future.
-Show the relationships between players(if any scatter plot or similar).

Case 2:- Analyse an actual dataset with multiple games,6 players,dealer and who wins.Validate if the Monte carlo simulation results are similar w.r.to each player's winning/lose/tie probabilities. -|- Check if there are any relationships or correlations between players.
- Analyse Which strategy is more likely to win.


Case 3:-Give one example of a blackjack multiplayer game simulation.
Where in once the 2 cards are distributed, the player can find out the probability of winning if he draws another card,or if he can win if he stays.Display the probabilities.
-Show which strategy must he  implement while playing,to increase chances of winning.
and show an output of winning probability for each player,
      if he hits extra one card(considering what other players have drawn)
      If he hits extra 2nd extra card.

- Here we are adding main funtions in our code and wrote some inference about it.

![image](https://github.com/PragathiKelkar22202401/MathsModel_Test-repo/assets/118851955/dfc0e39d-494f-4866-8377-3b476cdfb91f)


** This code defines a function called calculate_probability that calculates the probability of a player winning in a given scenario of a card game. Here's a breakdown of how the code works:

->The function takes three arguments:

player_card_sum: The sum of the values of the cards held by the player.
dealer_card_sum: The sum of the values of the cards held by the dealer.
player_draws: The number of times the player is allowed to draw additional cards.
Inside the function, a loop is used to replicate the simulation of playing the game 10,000 times (this number can be adjusted based on the desired level of accuracy).

->Within each simulation iteration, another loop (replicate(100, simulate_game(...)) is used to simulate playing the game 100 times. The simulate_game function is presumably defined elsewhere in the code and is responsible for simulating the outcome of the game based on the given player and dealer card sums and the number of player draws.

->The number of times the player wins out of the 100 game simulations is calculated using player_wins <- sum(...). This value represents the number of successful outcomes for the player.

->The probability of the player winning in a single game simulation is then calculated by dividing the player_wins by the total number of game simulations (100) using player_win_prob <- player_wins / 100.

->The calculated probability of winning in a single game simulation is stored in the player_win_prob variable.

->After the inner loop finishes 100 iterations, the player_win_prob values for each iteration are collected using the replicate function.

->The mean of all the collected player_win_prob values is calculated using mean(wins). This mean represents the estimated probability of the player winning over the 10,000 simulations.

->The final estimated probability of winning for the player in the given scenario is returned as the output of the calculate_probability function.

![image](https://github.com/PragathiKelkar22202401/MathsModel_Test-repo/assets/118851955/90ec9cf5-1945-477d-af6d-c2c807e62fb2)

** The function called simulate_multiplayer that models multiplayer card games to assess potential strategies. Given parameters like the player's initial card sum, the dealer's card sum, the number of draws allowed, the number of players, and the number of simulations, the function runs simulations to evaluate the likelihood of players winning. By calculating new card sums based on drawn cards and comparing these sums to the dealer's sum, the code determines if players win each game iteration. The function then computes the average probability of player victories across the simulations. In essence, this code allows for the investigation of effective strategies in multiplayer card games by repeatedly simulating game scenarios and analyzing the probability of winning for players under different conditions.

![image](https://github.com/PragathiKelkar22202401/MathsModel_Test-repo/assets/118851955/b6eaeb27-cf94-46b6-a55e-1992fd6c00f9)

The function called simulate_game that emulates the outcome of a single game in a card scenario. By taking inputs like the player's current card sum, the dealer's card sum, and the number of draws allowed, the function calculates the player's new card sum by adding the values of randomly drawn cards. It then determines whether the player wins the game by checking if their new sum is less than or equal to 21 and greater than the dealer's sum. The function outputs a boolean value indicating whether the player has won the game based on these conditions. Essentially, this code simulates the result of one round of a card game, considering player actions and comparing outcomes to assess whether the player wins against the dealer.

-We Created different plots showing interrelationships wherever possible.And have written likeliihood and interpretation/inference we get from each plot.


## Results

-> According to the data we simulated we believe balanced strategy is best among all with higher winning percentage for single/multi player.However it cannot guarantee a win always.

![image](https://github.com/PragathiKelkar22202401/MathsModel_Test-repo/assets/118851955/59be778c-0f97-4a15-9e6e-f364e00c820d)

-> Compares the prob of win across the huge data simulated using Monte Carlo.

** The x-axis displays the number of card draws, and the y-axis represents the win probability. The plot is organized into separate facets for each group of players, allowing for easier comparison of win probabilities.In essence, this code creates a comprehensive visualization to explore the relationship between card draws, player counts, and win probabilities in multiplayer scenarios.

![image](https://github.com/PragathiKelkar22202401/MathsModel_Test-repo/assets/118851955/5e9a5e66-c4a3-44f6-bf14-41754731ebad)

->Considering the data chosen,we can see that except for player 2 others have almost same prob of 60% and they win mostly with 2 cards drawn than 3 cards.

** Each player's win probability is represented as a bar on the y-axis, while the x-axis displays the number of card draws. The bars are color-coded to represent different players. The bars are positioned side by side using the "dodge" setting to allow easy comparison across scenarios.  The x-axis label indicates the number of card draws, and the y-axis label represents the win probability. The color palette helps distinguish between players, and a minimal theme is applied to keep the plot clean and uncluttered. In essence, this code creates a clear and informative plot that showcases how the number of card draws influences win probabilities for different players in various scenarios.

![image](https://github.com/PragathiKelkar22202401/MathsModel_Test-repo/assets/118851955/d77b596d-c90d-412b-a590-d46bb9e65970)

** The corrplot library to generate a heatmap that visually represents the correlations. The color intensity in the heatmap corresponds to the strength and direction of correlations between variables. Overall, this code performs correlation analysis and produces a heatmap to aid in understanding relationships between different card-related variables for player and dealer interactions.

## Pending Work

-> Need to implement comparing strategies successfully.


## Future Scope

The code you've presented provides a solid foundation for analyzing blackjack card game data and gaining insights into player strategies and probabilities. Here are some potential avenues for future development and expansion of the code:


1.Advanced Simulation Techniques: Enhance the simulation techniques used in the code to model more complex scenarios. For example, you could consider introducing card counting strategies, different deck sizes, and variations of the game rules to provide a more accurate representation of real-world gameplay.

2.Machine Learning Integration: Integrate machine learning algorithms to predict player strategies, winning probabilities, or optimal decisions. You could explore supervised learning models to predict player outcomes based on historical data or reinforcement learning approaches to develop optimal strategies through trial and error.

3.Interactive User Interface: Develop a user-friendly interactive interface using frameworks like Shiny to allow users to input their own card combinations, explore different scenarios, and observe how their decisions impact winning probabilities. This could serve as a learning tool for players looking to improve their game.

4.Player Behavior Analysis: Expand the analysis to include player behavior and decision-making patterns over time. Analyze how players' strategies evolve based on past outcomes and how their behavior compares to optimal strategies.

5.Game Variations Analysis: Extend the analysis to include variations of the blackjack game, such as different rule sets or side bets. Explore how these variations impact player strategies and winning probabilities.

6.Real-time Data Integration: If available, integrate real-time data from ongoing blackjack games to provide up-to-date insights and predictions. This could be particularly useful for players looking for in-game advice or casinos seeking to optimize their operations.

7.Statistical Significance Testing: Incorporate statistical significance testing to validate the results of the simulations and analyses. This will add a level of confidence to the insights derived from the code.

8.Data Visualization Enhancements: Experiment with more advanced visualization techniques, such as animated visualizations, heatmaps of decision trees, or interactive plots that allow users to explore various parameters and scenarios.

9.Player Segmentation: Segment players based on their behavior, strategies, and outcomes. This could lead to insights about different player profiles and preferences.

10.Collaborative Gaming Analysis: Analyze collaborative strategies where players can communicate and collaborate to make joint decisions. Explore how collaboration impacts winning probabilities and strategies.


## Contact

<h3 align="left">Connect with me:</h3>
<p align="left">
<a href="https://www.linkedin.com/in/pragathi-kelkar-220451115" target="blank"><img align="center" src="https://raw.githubusercontent.com/rahuldkjain/github-profile-readme-generator/master/src/images/icons/Social/linked-in-alt.svg" alt="Pragathi Kelkar" height="30" width="40" /></a>
</p>
